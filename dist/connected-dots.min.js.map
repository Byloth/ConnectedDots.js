{"version":3,"sources":["connected-dots.js"],"names":["Point","coordX","coordY","SIZE","MIN","MAX","ANIM_TIME","_this","this","_animation","originX","originY","x","y","closest","size","Math","random","startAnimation","newCoordX","newCoordY","duration","TweenMax","to","ease","Back","easeInOut","onComplete","killAnimation","kill","ConnectedDots","selectorId","EXIT_COORDS","X","Y","MIN_LINKS","floor","MAX_LINKS","_context","_points","_domElement","document","getElementById","_size","width","$","window","height","_mouse","_color","data","_getDistance","point1","point2","sqrt","pow","_getMin","num1","num2","num3","initialize","getContext","row","push","x1","length","y1","x2","y2","linked","linkCount","max_links","undefined","updateFrame","timestamp","clearRect","draw","requestAnimationFrame","pointDistance","beginPath","arc","PI","fillStyle","fill","closePath","i","startingDistance","endingDistance","gradient","createLinearGradient","addColorStop","moveTo","lineTo","strokeStyle","stroke","mousemove","event","clientX","clientY","mouseout","resize","newWidth","newHeight"],"mappings":"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","file":"connected-dots.min.js","sourcesContent":["/*\n *                 ConnectedDots.JS v. 2.1\n * \n *                Written by Bilotta Matteo.\n * \n *  Copyright Â© 2015 - 2016, Bylothink. All rights reserved.\n */\n\nvar Point = function(coordX, coordY)\n{\n    // Private constants:\n        const SIZE = {\n\n            MIN: 2,\n            MAX: 2\n        };\n        const WOBBING_RANGE = 100;\n        const ANIM_TIME = {\n\n            MIN: 1,\n            MAX: 2\n        };\n\n    // Private properties:\n        var _this = this;\n        var _animation = null;\n\n    // Public properties:\n        this.originX = coordX;\n        this.originY = coordY;\n\n        this.x = coordX;\n        this.y = coordY;\n\n        this.closest = [];\n\n        this.size = (Math.random() * SIZE.MAX) + SIZE.MIN;\n\n    // Public methods:\n        this.startAnimation = function()\n        {\n            var newCoordX = _this.originX + ((Math.random() * WOBBING_RANGE) - (WOBBING_RANGE / 2));\n            var newCoordY = _this.originY + ((Math.random() * WOBBING_RANGE) - (WOBBING_RANGE / 2));\n\n            var duration = ANIM_TIME.MAX * Math.random() + ANIM_TIME.MIN;\n\n            _animation = TweenMax.to(_this, duration, {\n\n                x: newCoordX,\n                y: newCoordY,\n\n                ease: Back.easeInOut,\n\n                onComplete: function()\n                {\n                    _this.startAnimation();\n                }\n            });\n        };\n\n        this.killAnimation = function()\n        {\n            _animation.kill();\n        }\n};\n\nvar ConnectedDots = function(selectorId)\n{\n    // Private Constants:\n        const DRAW_RANGE = 175;\n        const EXIT_COORDS = {\n\n            X: -1920,\n            Y: -1080\n        };\n\n        const MAX_LINKS = 5;\n        const MIN_LINKS = Math.floor(MAX_LINKS / 2);\n\n        const SPACING = 75;\n\n    // Private properties:\n        var _this = this;\n\n        var _domElement = document.getElementById(selectorId);\n\n        var _size = {\n\n            width: $(window).width(),\n            height: $(window).height()\n        };\n        var _mouse = {\n            \n            x: EXIT_COORDS.X,\n            y: EXIT_COORDS.Y\n        };\n\n        var _context;\n        var _points;\n        var _spacing;\n\n        var _color = $(_domElement).data(\"color\");\n\n    // Private methods:\n        var _getDistance = function(point1, point2)\n        {\n            return Math.sqrt(Math.pow(point1.x - point2.x, 2) + Math.pow(point1.y - point2.y, 2));\n        };\n\n        var _getMin = function(num1, num2, num3)\n        {\n            if (num1 <= num3)\n            {\n                if (num2 <= num3)\n                {\n                    if (num1 <= num2)\n                    {\n                        return num1;\n                    }\n                    else\n                    {\n                        return num2;\n                    }\n                }\n                else\n                {\n                    return num1;\n                }\n            }\n            else if (num2 <= num3)\n            {\n                return num2;\n            }\n            else\n            {\n                return num3;\n            }\n        };\n\n    // Public methods:\n        this.initialize = function()\n        {\n            _domElement.width = _size.width;\n            _domElement.height = _size.height;\n\n            _context = _domElement.getContext(\"2d\");\n\n            // Initializing points...\n                _points = [];\n\n                for (var x = -1; (x * SPACING) < (_domElement.width + SPACING); x += 1)\n                {\n                    var row = [];\n\n                    for (var y = -1; (y * SPACING) < (_domElement.height + SPACING); y += 1)\n                    {\n                        var coordX = (x + Math.random()) * SPACING;\n                        var coordY = (y + Math.random()) * SPACING;\n\n                        row.push(new Point(coordX, coordY));\n                    }\n\n                    _points.push(row);\n                }\n\n            // Connecting points...\n                for (var x1 = 0; x1 < _points.length; x1 += 1)\n                {\n                    for (var y1 = 0; y1 < _points[x1].length; y1 += 1)\n                    {\n                        for (var x2 = 0; x2 < _points.length; x2 += 1)\n                        {\n                            for (var y2 = 0; y2 < _points[x2].length; y2 += 1)\n                            {\n                                if (_points[x1][y1] != _points[x2][y2])\n                                {\n                                    var linked = false;\n                                    var linkCount = 0;\n                                    var max_links = _getMin((_points.length - x1) + MIN_LINKS, (_points[x1].length - y1) + MIN_LINKS, MAX_LINKS);\n\n                                    do\n                                    {\n                                        if (_points[x1][y1].closest[linkCount] == undefined)\n                                        {\n                                            _points[x1][y1].closest.push(_points[x2][y2]);\n\n                                            linked = true;\n                                        }\n\n                                        linkCount += 1;\n                                    }\n                                    while ((linked == false) && (linkCount < max_links));\n\n                                    linkCount = 0;\n\n                                    while ((linked == false) && (linkCount < _points[x1][y1].closest.length))\n                                    {\n                                        if (_getDistance(_points[x1][y1], _points[x2][y2]) < _getDistance(_points[x1][y1], _points[x1][y1].closest[linkCount]))\n                                        {\n                                            _points[x1][y1].closest[linkCount] = _points[x2][y2];\n\n                                            linked = true;\n                                        }\n\n                                        linkCount += 1;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n\n            // Initialization animations...\n                for (var x1 = 0; x1 < _points.length; x1 += 1)\n                {\n                    for (var y1 = 0; y1 < _points[x1].length; y1 += 1)\n                    {\n                        _points[x1][y1].startAnimation();\n                    }\n                }\n        };\n\n        this.updateFrame = function(timestamp)\n        {\n            _context.clearRect(0, 0, _domElement.width, _domElement.height);\n\n            _this.draw();\n\n            requestAnimationFrame(_this.updateFrame);\n        };\n\n        this.draw = function()\n        {\n            for (var x1 = 0; x1 < _points.length; x1 += 1)\n            {\n                for (var y1 = 0; y1 < _points[x1].length; y1 += 1)\n                {\n                    var pointDistance = _getDistance(_points[x1][y1], _mouse);\n\n                    if (pointDistance < DRAW_RANGE)\n                    {\n                        _context.beginPath();\n                        _context.arc(_points[x1][y1].x, _points[x1][y1].y, _points[x1][y1].size, 0, 2 * Math.PI, false);\n                        _context.fillStyle = \"rgba(\" + _color + \", \" + (1 - (pointDistance / DRAW_RANGE)) + \")\";\n                        _context.fill();\n                        _context.closePath();\n                    }\n\n                    for (var i = 0; i < _points[x1][y1].closest.length; i += 1)\n                    {\n                        var startingDistance = _getDistance(_points[x1][y1], _mouse);\n                        var endingDistance = _getDistance(_points[x1][y1].closest[i], _mouse);\n\n                        if ((startingDistance < DRAW_RANGE) || (endingDistance < DRAW_RANGE))\n                        {\n                            var gradient = _context.createLinearGradient(_points[x1][y1].x, _points[x1][y1].y, _points[x1][y1].closest[i].x, _points[x1][y1].closest[i].y);\n\n                            gradient.addColorStop(0, \"rgba(\" + _color + \", \" + (1 - (startingDistance / DRAW_RANGE)) + \")\");\n                            gradient.addColorStop(1, \"rgba(\" + _color + \", \" + (1 - (endingDistance / DRAW_RANGE)) + \")\");\n\n                            _context.beginPath();\n                            _context.moveTo(_points[x1][y1].x, _points[x1][y1].y);\n                            _context.lineTo(_points[x1][y1].closest[i].x, _points[x1][y1].closest[i].y);\n                            _context.strokeStyle = gradient;\n                            _context.stroke();\n                            _context.closePath();\n                        }\n                    }\n                }\n            }\n        };\n\n    // Start executions...\n        requestAnimationFrame(_this.updateFrame);\n\n    // Listening for events...\n        // Mouse events:\n            $(window).mousemove(function(event)\n            {\n                _mouse.x = event.clientX;\n                _mouse.y = event.clientY; // + $(document).scrollTop();\n            });\n\n            $(window).mouseout(function(event)\n            {\n                _mouse = {\n                    \n                    x: EXIT_COORDS.X,\n                    y: EXIT_COORDS.Y\n                };\n            });\n\n        $(window).resize(function()\n        {\n            var newWidth = $(window).width();\n            var newHeight = $(window).height();\n\n            // TODO: Modificare questa logica introducendo una sorta di tolleranza?\n            //\n                if ((_size.width != newWidth) || (_size.height != newHeight))\n                {\n                    _size.width = newWidth;\n                    _size.height = newHeight;\n\n                    // TODO: Evitare di eliminare e reinizializzare, ogni volta, TUTTI i ConnectedDots?\n                    //\n                        for (var x1 = 0; x1 < _points.length; x1 += 1)\n                        {\n                            for (var y1 = 0; y1 < _points[x1].length; y1 += 1)\n                            {\n                                _points[x1][y1].killAnimation();\n                            }\n                        }\n\n                        _this.initialize();\n                }\n        });\n};\n"]}